cmake_minimum_required(VERSION 3.6.3)

project(libgtest-download NONE)

include(ExternalProject)

ExternalProject_Add(libgtest-download
    SOURCE_DIR        ${CMAKE_CURRENT_SOURCE_DIR}/../../CMake/Dependencies/googletest
    DOWNLOAD_COMMAND  
                        cp -av ${CMAKE_CURRENT_SOURCE_DIR}/../../CMake/Dependencies/googletest/. 
                            ${CMAKE_CURRENT_BINARY_DIR}/build/src/libgtest-download
	PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/build
    BINARY_DIR        ${CMAKE_CURRENT_BINARY_DIR}/build/src/libgtest-download
    CMAKE_ARGS
        -DCMAKE_INSTALL_PREFIX=${OPEN_SRC_INSTALL_PREFIX}
        -DBUILD_GMOCK=0
        -Dgtest_force_shared_crt=ON
    BUILD_ALWAYS      TRUE
    BUILD_IN_SOURCE   FALSE
    TEST_COMMAND      ""
)
